/* Zenppuccin V1.0.0 */


/* === SVG Separator Line === */
.vertical-pinned-tabs-container-separator {
    background: none !important; /* Remove original background line */
    height: 16px !important; /* Set fixed height */
    max-height: none !important; /* Remove max-height restriction */
    display: flex !important; /* Use flexbox to center SVG */
    flex-direction: row !important; /* Arrange items horizontally */
    align-items: center !important; /* Vertically center items */
    justify-content: flex-end !important; /* Align items to the right */
    overflow: hidden !important; /* Hide overflow during animation */
    border: none !important; /* Ensure no border is applied by default */
    width: 100% !important;; /* Ensure separator takes full available width */
    box-sizing: border-box !important; /* Include padding in width */
    gap: 0; /* Set initial gap to 0 */
    margin: 5px 0 5px 0 !important;
  }
  
  
  
  .vertical-pinned-tabs-container-separator svg {
    width: 100% !important; /* Set width explicitly to account for padding */
    height: 1.5px; /* Reduced from 2px to make thinner line */
    display: block; /* Ensure SVG behaves as a block element */
    overflow: visible; /* Allow potential animations to go outside bounds */
    transition: width 0.15s ease-in-out; /* Add transition for width */
    min-width: 0; /* Allow shrinking below intrinsic size */
    margin-right: 0; /* Reduced from 8px to decrease space between line and buttons */
  }
  
  /* Shrink SVG width on separator hover */
  .vertical-pinned-tabs-container-separator:hover svg {
     width: calc(100% - 100px) !important; 
  }
  
  /* Update SVG line selectors to path */
  .vertical-pinned-tabs-container-separator svg path {
    stroke: light-dark(rgba(1, 1, 1, 0.15), rgba(255, 255, 255, 0.2)); /* Line color */
    stroke-width: 1px !important; /* Reduced from 1.5px to make thinner line */
    vector-effect: non-scaling-stroke; /* Keep stroke width consistent on scaling */
    fill: none; /* Ensure path isn't filled */
    transition: stroke 0.15s ease-in-out; /* Add transition for color */
  }
  
  /* Optional: Change path color slightly on hover */
  .vertical-pinned-tabs-container-separator:hover svg path {
      stroke: light-dark(rgba(1, 1, 1, 0.3), rgba(255, 255, 255, 0.4));
  }
  
  /* --- End SVG Path Animation --- */
  
  /* Sort & Clear Button Styling & Animation */
  .vertical-pinned-tabs-container-separator #sort-button,
  .vertical-pinned-tabs-container-separator #clear-button {
      /* Inherits font-size, color from tab_sort.uc.js */
      flex-shrink: 0; /* Prevent button from shrinking */
      min-width: 0; /* Ensure it can shrink to zero */
      max-width: 0; /* Use max-width to control hidden state */
      opacity: 0; /* Start fully transparent */
      overflow: hidden; /* Hide content when width is 0 */
      pointer-events: none; /* Not interactive initially */
      transition: max-width 0.15s ease-in-out, opacity 0.1s ease-in-out 0.05s; /* Transition max-width */
      margin: 0 !important; /* Override any potential margins */
      padding: 0 !important; /* Force zero padding initially */
      white-space: nowrap; /* Prevent label wrapping */
      border-radius: 4px; /* Match hover state */
  }
  
  .vertical-pinned-tabs-container-separator:hover #sort-button,
  .vertical-pinned-tabs-container-separator:hover #clear-button {
      max-width: 45px !important; /* Reduced from 55px to make buttons smaller */
      opacity: 1; /* Fade in */
      pointer-events: auto; /* Become interactive */
      padding: 1px !important; /* Restore original padding */
      margin-left: 2px !important; /* Reduced from 4px to decrease space between buttons */
      cursor: pointer !important;
  }
  
  /* Hide the line if the separator is meant to be hidden (e.g., no sortable tabs) */
  #vertical-pinned-tabs-container .zen-workspace-tabs-section[hide-separator] .vertical-pinned-tabs-container-separator,
  .vertical-pinned-tabs-container-separator.has-no-sortable-tabs {
      max-height: 0 !important;
      margin: 0 auto !important;
      padding: 0 !important; /* Remove padding when hidden */
      border: none !important; /* Ensure no border shows up */
      overflow: hidden !important; /* Hide content when container is hidden */
      gap: 0 !important; /* Remove gap when hidden */
  }
  
  .vertical-pinned-tabs-container-separator.has-no-sortable-tabs svg,
  .vertical-pinned-tabs-container-separator.has-no-sortable-tabs #sort-button,
  .vertical-pinned-tabs-container-separator.has-no-sortable-tabs #clear-button {
      display: none !important; /* Specifically hide the SVG and buttons */
      width: 0 !important;
      opacity: 0 !important;
  }
  /* === END SVG Separator Line === */
  
  /* Button icons styling */
  #sort-button, #clear-button {
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      font-size: 11px !important; /* Reduced font size */
  }
  
  #sort-button .broom-icon {
      width: 12px !important; /* Reduced from 14px */
      height: 12px !important; /* Reduced from 14px */
      margin-right: 2px !important; /* Reduced from 4px */
      fill: currentColor !important;
  }
  
  #clear-button .arrow-icon {
      width: 12px !important; /* Reduced from 14px */
      height: 12px !important; /* Reduced from 14px */
      margin-right: 2px !important; /* Reduced from 4px */
      stroke: currentColor !important;
  }
  
  #sort-button .toolbarbutton-text,
  #clear-button .toolbarbutton-text {
      margin-left: 1px !important; /* Reduced from 2px */
  }
  
  /* Broom brushing animation - updated */
  @keyframes brush-sweep {
    0% { transform: rotate(0deg); }
    20% { transform: rotate(-15deg); }
    40% { transform: rotate(15deg); }
    60% { transform: rotate(-15deg); }
    80% { transform: rotate(15deg); }  
    100% { transform: rotate(0deg); }
  }
  
  #sort-button.brushing .broom-icon {
    animation: brush-sweep 0.8s ease-in-out;
    transform-origin: 50% 50%; /* Center of broom */
  }
  
  /* Arrow pulse animation */
  @keyframes arrow-pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
  }
  
  #clear-button.clearing .arrow-icon {
    animation: arrow-pulse 0.6s ease-in-out;
  }
  
  #sort-button.hidden-button, #clear-button.hidden-button {
      display: none !important;
      pointer-events: none !important;
      opacity: 0 !important;
      max-width: 0 !important;
      margin: 0 !important;
      padding: 0 !important;
  }
  
  /* Shrink SVG width on separator hover when no buttons are visible */
  .vertical-pinned-tabs-container-separator:hover svg {
     /* Calculate width relative to the base width */
     width: calc(100% - 
       (100px * 
         (1 - 
           (var(--sort-button-hidden, 0) * var(--clear-button-hidden, 0))
         )
       )
     ) !important; 
  }
  
  /* Hide the buttons entirely when they're hidden */
  .vertical-pinned-tabs-container-separator.has-no-sortable-tabs #sort-button,
  .vertical-pinned-tabs-container-separator.has-no-sortable-tabs #clear-button {
      display: none !important; /* Specifically hide the buttons */
      width: 0 !important;
      opacity: 0 !important;
  }
  
  /* The separator is always visible, even if buttons are hidden */
  .vertical-pinned-tabs-container-separator {
      display: flex !important;
      flex-direction: row !important;
      align-items: center !important;
      justify-content: flex-end !important;
  }



@namespace url("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul");

@-moz-document url-prefix("chrome://browser/content/browser.xhtml") {
  /* ── Dark mode: white thick outline ─────────────────────────────── */
  @media (prefers-color-scheme: dark) {
    .tabbrowser-tab:not([zen-essential="true"]):hover .tab-icon-image,
    .tabbrowser-tab[pinned]:not([zen-essential="true"]):hover .tab-icon-image,
    .tabbrowser-tab[zen-essential="true"]:hover .tab-icon-image {
      /* two brush-strokes of white, 0 offset → extra-thick, sharp edge */
      filter:
        drop-shadow(0 0 3px #fff)
        drop-shadow(0 0 3px #fff) !important;
    }
  }

  /* ── Light mode: black thick outline ────────────────────────────── */
  @media (prefers-color-scheme: light) {
    .tabbrowser-tab:not([zen-essential="true"]):hover .tab-icon-image,
    .tabbrowser-tab[pinned]:not([zen-essential="true"]):hover .tab-icon-image,
    .tabbrowser-tab[zen-essential="true"]:hover .tab-icon-image {
      filter:
        drop-shadow(0 0 3px #000)
        drop-shadow(0 0 3px #000) !important;
    }
  }
}

@-moz-document url-prefix("chrome://browser/content/browser.xhtml") {
  /* ── Define a pulsing “glow” animation ────────────────────────────── */
  @keyframes pulse-maroon {
    0% {
      /* start with no outline */
      filter: drop-shadow(0 0 0 #eba0ac) drop-shadow(0 0 0 #eba0ac);
    }
    50% {
      /* grow to a strong glow */
      filter: drop-shadow(0 0 8px #eba0ac) drop-shadow(0 0 8px #eba0ac);
    }
    100% {
      /* settle at a medium glow */
      filter: drop-shadow(0 0 4px #eba0ac) drop-shadow(0 0 4px #eba0ac);
    }
  }

  /* ── Smoothly fade out when you stop hovering ─────────────────────── */
  .tabbrowser-tab .tab-icon-image {
    transition: filter 0.3s ease-in-out !important;
  }

  /* ── Apply the animation on hover ───────────────────────────────── */
  .tabbrowser-tab:not([zen-essential="true"]):hover .tab-icon-image,
  .tabbrowser-tab[pinned]:not([zen-essential="true"]):hover .tab-icon-image,
  .tabbrowser-tab[zen-essential="true"]:hover .tab-icon-image {
    animation: pulse-maroon 1s ease-in-out infinite alternate !important;
  }
}
  

/*******************************************************************************
 * IMPORTS AND ROOT VARIABLES
 ******************************************************************************/
/* @import url("https://github.com/ferrocyante/Tab-groups-for-Arc-H/raw/refs/heads/main/tab-groups.css")  */

:root {
  --bg_color: "https://github.com/sameerasw/my-internet/blob/main/wave-light.png?raw=true";
  --bg_img: image-set(var(--bg_color)) !important;
}

/*******************************************************************************
 * GENERAL UI ELEMENTS STYLING
 ******************************************************************************/

/* Hidden elements */
/* #nav-bar-overflow-button, */
#zen-current-workspace-indicator {
  display: none;
}

/* Separator width reduction */
#vertical-pinned-tabs-container-separator,
#tabbrowser-arrowscrollbox-periphery:before,
#TabsToolbar-customization-target:after,
.vertical-pinned-tabs-container-separator {
  width: 30% !important;
}

/* No window controls - macOS */
#zen-sidebar-top-buttons {
  .titlebar-buttonbox-container {
    display: none !important;
  }
}

/* No split borders */
hbox[zen-split="true"].deck-selected {
  border: none !important;
  outline: none !important;
}

/* Fix find in page opacity */
findbar * {
  opacity: 1 !important;
}

/*******************************************************************************
 * NEW TAB CUSTOMIZATION
 ******************************************************************************/

/* Modify new tab entry appearance */
[label="Super Speedy Dial"] {
  .tab-label-container:after {
    content: "Home" !important;
  }

  label {
    display: none !important;
  }

  .tab-icon-image {
    content: url("chrome://branding/content/icon32.png") !important;
    border-radius: 100px !important;
    mix-blend-mode: difference !important;
  }
}

/* Empty tab styling - currently commented out */
/* #browser:has([zen-has-empty-tab=""]) .deck-selected .browserStack {
  background-image: var(--bg_img, url("https://upload.wikimedia.org/wikipedia/commons/3/3c/Zen_Browser_logo_%28red_circles%29.svg")) !important;
  background-position: center !important;
  background-repeat: no-repeat !important;
  
  background-size: 150px !important;
  
  filter: saturate(0) !important;
  
  
@media (prefers-color-scheme: light) {
  filter: saturate(0) invert(1) !important;
  }
} */

/* Hide compact sidebar when no tabs open */
#zen-main-app-wrapper[zen-compact-mode="true"]:not(
    :has(#urlbar[open][zen-floating-urlbar="true"])
  )
  #browser:has([zen-empty-tab="true"][selected="true"])
  #navigator-toolbox,
#zen-main-app-wrapper[zen-compact-mode="true"]
  #browser:has([zen-empty-tab="true"][selected="true"])
  #urlbar:not([open]) {
  opacity: 0 !important;
}

/* #main-window:has(#zen-main-app-wrapper[zen-compact-mode="true"] hbox#browser:has([zen-empty-tab="true"][selected="true"])) #mainPopupSet > 
    #tab-preview-panel{
      display: none !important;
    } */

/* Dark theme for empty tab image */
html:not([lwt-sidebar="dark"]) {
  #browser:has([zen-empty-tab="true"][selected="true"]) .browserStack browser {
    filter: invert(1) saturate(0);
  }
}

/*******************************************************************************
 * SIDEBAR STYLING AND ANIMATIONS
 ******************************************************************************/

/* Hidden sidebar buttons with hover reveal */
#zen-sidebar-icons-wrapper,
#home-button {
  opacity: 0;
  transition: opacity 0.5s ease-in-out !important;

  &:hover {
    opacity: 1 !important;
  }
}

/* Sidebar background transparency */
#sidebar-box,
#bookmarksPanel.sidebar-panel,
#sidebar-header,
#history-panel,
html,
#header {
  background-color: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

/* Sidebar styling and border radius */
/* body > browser:nth-child(2)[disableglobalhistory="true"], */
#sidebar {
  border-radius: 1em !important;
  overflow: hidden !important;
  margin: 0 14px 14px 0 !important;
}

/* Hide GenAI provider selector in sidebar */
#header:has(select[data-l10n-id="genai-header-provider-menu"]) {
  display: none !important;
}

/* Sidebar header animation */
#sidebar-header {
  transition: all 0.3s ease-in-out !important;
  top: 0px !important;
  position: relative !important;
  height: 0 !important;
  opacity: 0.01 !important;
  &:hover {
    top: 0px !important;
    height: 40px !important;
    opacity: 1 !important;
  }
}

/* No border split view handle fix */
.zen-view-splitter-header {
  transition: margin 0.3s ease-in-out;
  &:hover {
    margin-top: 15px !important;
  }
}

/* Sidebar bottom button positioning */
#zen-sidebar-bottom-buttons {
  order: 1 !important;
  margin-bottom: 0.5em !important;
}

/* Hide workspace dots with hover reveal */
/* #zen-main-app-wrapper[zen-compact-mode="true"] #navigator-toolbox {
  opacity: 1 !important;
}

#zen-sidebar-bottom-buttons:not(:has([open="true"])) {
  bottom: -25px !important;
  opacity: 0 !important;
  transition: all 0.3s ease-in-out !important;
} */

/* Workspace indicator styling and animation */
.unified-extensions-item {
  transition: opacity 0.3s ease-in-out !important;
}

.zen-current-workspace-indicator {
  order: 100000 !important;
  opacity: 1;
  bottom: 0px !important;
  min-height: initial !important;
  transition: all 0.3s ease-in-out !important;
}

body:not(
    :has(zen-workspace-icons:hover, .zen-current-workspace-indicator:hover)
  ) {
  .zen-current-workspace-indicator {
    opacity: 0 !important;
    bottom: -50px !important;
    height: 0 !important;
    min-height: 0 !important;
    padding: 0 !important;
    margin: 0 !important;
  }
}

/* Show controls on hover */
#navigator-toolbox:hover {
  #zen-sidebar-bottom-buttons,
  #zen-media-controls-toolbar {
    bottom: 0px !important;
    opacity: 1 !important;
  }
}

/* Hide extensions when not hovering sidebar bottom */
#zen-sidebar-bottom-buttons:not(:hover) {
  .unified-extensions-item:not(:has([open])) {
    opacity: 0 !important;
  }
}


/*******************************************************************************
 * EXTENSIONS STYLING
 ******************************************************************************/

/* Extension button scale for macOS */
#unified-extensions-button {
  image {
    scale: 1.25;
  }
}

/* Custom extension icons */
/* Stylebot */
[label="Stylebot"] image {
  list-style-image: url("https://cdn3.iconfinder.com/data/icons/feather-5/24/command-128.png") !important;
}

/* Dark Reader */
[label="Dark Reader"] image {
  list-style-image: url("https://cdn3.iconfinder.com/data/icons/feather-5/24/moon-512.png") !important;
}

/* Zen Internet */
[label="Zen Internet"] image {
  /*   list-style-image: url("https://cdn3.iconfinder.com/data/icons/feather-5/24/command-128.png") !important; */
}

/* Proton Pass */
[label="Proton Pass: Free Password Manager"] image {
  list-style-image: url("https://cdn3.iconfinder.com/data/icons/feather-5/24/key-128.png") !important;
}

/* Dark theme invert for extension icons */
[devtoolstheme="dark"] {
  [label="Dark Reader"],
  [label="Stylebot"],
  /*   [label="Zen Internet"], */
  [label="Proton Pass: Free Password Manager"] {
    image {
      filter: invert(1);
    }
  }
}

/*******************************************************************************
 * ANIMATIONS AND VISUAL EFFECTS
 ******************************************************************************/

/* Loading tab animation */
tab[busy] {
  scale: 0.95 !important;
  .tab-background {
    opacity: 0.3 !important;
  }
}

/* Scale effect when tab bar is not expanded */
#tabbrowser-tabs:not([expanded]) tab,
#tabbrowser-tabs:not([expanded]) tab-group {
  scale: 1.1 !important;
}

/* Transparent URL bar styling */
#urlbar[open][zen-floating-urlbar="true"] {
  #urlbar-background {
    background-color: light-dark(
      color-mix(in srgb, #fdfdfd 80%, transparent),
      color-mix(in srgb, #0e0e0e 80%, transparent)
    ) !important;
  }
}

/* Transparent glance styling */
.zen-glance-background > vbox {
  mask-image: linear-gradient(
    to right,
    black 0%,
    black 4%,
    transparent 7%,
    transparent 93.5%,
    black 96%,
    black 100%
  );
  mask-repeat: no-repeat;
  mask-size: 100% 100%;
}

.zen-glance-overlay > vbox {
  background-color: light-dark(#fff7, #0007) !important;
  margin-top: 0.5% !important;
  margin-bottom: 0.5% !important;
  height: 98% !important;
}

/*******************************************************************************
 * TAB GROUPS STYLING
 ******************************************************************************/

/* Tab group label styling */
.tab-group-label,
tab-group .tab-group-label {
  width: 100% !important;
  border: none !important;
  border-radius: 1em !important;
  outline: none !important;
  margin-right: 0 !important;
  text-align: left !important;
  padding-left: 10px !important;
  background: color-mix(
    in srgb,
    var(--tab-group-color) 20%,
    transparent
  ) !important;
  color: color-mix(in srgb, var(--tab-group-color) 70%, #fff) !important;
  scale: 1 !important;
  transition: all 0.2s ease-in-out !important;
}
tab-group .tab-group-label:hover {
  padding-left: 15px !important;
  background: color-mix(
    in srgb,
    var(--tab-group-color) 50%,
    transparent
  ) !important;
  color: color-mix(in srgb, var(--tab-group-color) 30%, #fff) !important;
}
tab-group .tab-group-label:active {
  scale: 0.9 !important;
}
tab-group:not([collapsed]) .tab-group-label {
  border: 1.5px dashed
    color-mix(in srgb, var(--tab-group-color) 50%, transparent) !important;
}

/* Label container margins */
.tab-group-label-container {
  margin-top: 3px !important;
  margin-bottom: 0 !important;
}
tab-group[collapsed] .tab-group-label-container {
  margin-bottom: 3px !important;
}

/* Hide label container's after pseudo */
.tab-group-label-container::after {
  display: none !important;
}

/* Tab stack styles */
.tab-stack,
tab-group .tab-stack {
  transition: all 0.3s ease-in-out !important;
  border-radius: 1.2em !important;
  background: color-mix(
    in srgb,
    var(--tab-group-color) 20%,
    transparent
  ) !important;
  margin-block: 2px !important;
}
.tab-stack:hover,
tab-group .tab-stack:hover {
  background: color-mix(
    in srgb,
    var(--tab-group-color) 50%,
    transparent
  ) !important;
}

/* Hide tab indicator */
tab-group .tabbrowser-tab::before {
  display: none !important;
}

/*******************************************************************************
 * CTRL+TAB SWITCHER STYLING
 ******************************************************************************/

/* Ctrl+Tab preview panel styling */
#ctrlTab-previews {
  border-radius: 2em !important;
  margin-bottom: 2em !important;
  padding: 1.5em !important;

  box-shadow: rgba(0, 0, 0, 0.15) 0px -36px 30px 0px inset,
    rgba(0, 0, 0, 0.1) 0px -79px 40px 0px inset, rgba(0, 0, 0, 0.06) 0px 2px 1px,
    rgba(0, 0, 0, 0.09) 0px 4px 2px, rgba(0, 0, 0, 0.09) 0px 8px 4px,
    rgba(0, 0, 0, 0.09) 0px 16px 8px, rgba(0, 0, 0, 0.09) 0px 32px 16px !important;
  background-color: light-dark(#fff8, #0005) !important;
}

/* Preview image styling */
.ctrlTab-canvas img {
  border-radius: 1em !important;
  transition: all 0.5s ease-in-out !important;

  &:hover,
  &:active,
  &:focus {
    scale: 1.05 !important;
  }
}

#ctrlTab-preview:active,
#ctrlTab-preview:focus {
  .ctrlTab-canvas img {
    scale: 1.05 !important;
  }
}

/* Panel background and blur effect */
#ctrlTab-panel {
  background-color: transparent !important;
  --panel-background: transparent !important;
  --zen-appcontent-border: none !important;
  border: none !important;
}

body:has(
    #ctrlTab-panel[hasbeenopened="true"] .ctrlTab-preview:not([hidden="true"])
  )
  #tabbrowser-tabpanels {
  filter: blur(10px) !important;
}

/* ============================================= */
/* ======== personal pref only, keep off ======== */
/* ============================================= */

/* ────────────────────────────────────────────────────────────────────────── */
/* Add a soft drop-shadow to Zen Browser’s “essential” tabs                */
/* Targets the tab background layer of any tab with zen-essential="true"   */
/* You can tweak the shadow’s spread, blur and opacity as you like         */
.tabbrowser-tab[zen-essential="true"] .tab-stack .tab-background {
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3) !important;
}
/* ────────────────────────────────────────────────────────────────────────── */

  
/* ========== Bigger Text for Normal Tabs ========== */
/* Increase font size of the tab title on regular tabs */
#tabbrowser-tabs .tabbrowser-tab:not([pinned]):not([essential]) .tab-label {
  font-size: 18px !important;       /* adjust this value as you like */
  line-height: 1.2 !important;       /* keeps text vertically centered */
  padding-block: 2px !important;     /* optional: tweak vertical padding */
}

@namespace url("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul");

/* 1. Declare SF Pro family */
:root {
  --zen-ui-font: "SF Pro Display", "SF Pro Text", 
                 -apple-system, system-ui, sans-serif !important;
}

/* 2. Apply it throughout the UI */
*,
*::before,
*::after,
menupopup,
panel,
#navigator-toolbox,
#TabsToolbar,
#toolbar,
.tabbrowser-tab,
.tab-content,
.tab-label {
  font-family: var(--zen-ui-font) !important;
}
